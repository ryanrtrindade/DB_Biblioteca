


-- Tabela livros
CREATE TABLE livros (
    id_livro SERIAL PRIMARY KEY,
    titulo VARCHAR(150) NOT NULL,
    genero VARCHAR(50),
    quantidade INT NOT NULL CHECK (quantidade >= 0)
);

-- Tabela usuarios
CREATE TABLE usuarios (
    id_usuario SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    telefone VARCHAR(20),
    email VARCHAR(100)
);

-- Tabela emprestimo
CREATE TABLE emprestimo (
    id_emprestimo SERIAL PRIMARY KEY,
    id_livro INT NOT NULL,
    id_usuario INT NOT NULL,
    data_emp DATE NOT NULL,
    data_dev DATE,
    status VARCHAR(20),

    CONSTRAINT fk_emprestimo_livro
        FOREIGN KEY (id_livro) REFERENCES livros(id_livro),

    CONSTRAINT fk_emprestimo_usuario
        FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario)
);

-- Tabela multa
CREATE TABLE multa (
    id_multa SERIAL PRIMARY KEY,
    id_emprestimo INT NOT NULL,
    valor NUMERIC(10,2) NOT NULL CHECK (valor >= 0),
    paga BOOLEAN DEFAULT FALSE,
    data_multa DATE,

    CONSTRAINT fk_multa_emprestimo
        FOREIGN KEY (id_emprestimo) REFERENCES emprestimo(id_emprestimo)
);
